<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>scipy.stats.weightedtau &mdash; SciPy v1.1.0.dev0+4e64658 Reference Guide</title>
    
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0.dev0+4e64658',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/scipy-mathjax/MathJax.js?config=scipy-mathjax"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" >
    <link rel="search" title="Search" href="../search.html" >
    <link rel="top" title="SciPy v1.1.0.dev0+4e64658 Reference Guide" href="../index.html" >
    <link rel="up" title="Statistical functions (scipy.stats)" href="../stats.html" >
    <link rel="next" title="scipy.stats.linregress" href="scipy.stats.linregress.html" >
    <link rel="prev" title="scipy.stats.kendalltau" href="scipy.stats.kendalltau.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../index.html">SciPy v1.1.0.dev0+4e64658 Reference Guide</a></li>
	
          <li class="active"><a href="../stats.html" accesskey="U">Statistical functions (<code class="docutils literal"><span class="pre">scipy.stats</span></code>)</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="scipy.stats.linregress.html" title="scipy.stats.linregress"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="scipy.stats.kendalltau.html" title="scipy.stats.kendalltau"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/scipyshiny_small.png" alt="Logo">
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="scipy.stats.kendalltau.html"
                        title="previous chapter">scipy.stats.kendalltau</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="scipy.stats.linregress.html"
                        title="next chapter">scipy.stats.linregress</a></p>


        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="scipy-stats-weightedtau">
<h1>scipy.stats.weightedtau<a class="headerlink" href="#scipy-stats-weightedtau" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="scipy.stats.weightedtau">
<code class="descclassname">scipy.stats.</code><code class="descname">weightedtau</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>rank=True</em>, <em>weigher=None</em>, <em>additive=True</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/scipy/scipy/blob/4e64658/scipy/stats/stats.py#L3569-L3741"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scipy.stats.weightedtau" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a weighted version of Kendall’s <span class="math">\(\tau\)</span>.</p>
<p>The weighted <span class="math">\(\tau\)</span> is a weighted version of Kendall’s
<span class="math">\(\tau\)</span> in which exchanges of high weight are more influential than
exchanges of low weight. The default parameters compute the additive
hyperbolic version of the index, <span class="math">\(\tau_\mathrm h\)</span>, which has
been shown to provide the best balance between important and
unimportant elements <a class="reference internal" href="#r679" id="id1">[R679]</a>.</p>
<p>The weighting is defined by means of a rank array, which assigns a
nonnegative rank to each element, and a weigher function, which
assigns a weight based from the rank to each element. The weight of an
exchange is then the sum or the product of the weights of the ranks of
the exchanged elements. The default parameters compute
<span class="math">\(\tau_\mathrm h\)</span>: an exchange between elements with rank
<span class="math">\(r\)</span> and <span class="math">\(s\)</span> (starting from zero) has weight
<span class="math">\(1/(r+1) + 1/(s+1)\)</span>.</p>
<p>Specifying a rank array is meaningful only if you have in mind an
external criterion of importance. If, as it usually happens, you do
not have in mind a specific rank, the weighted <span class="math">\(\tau\)</span> is
defined by averaging the values obtained using the decreasing
lexicographical rank by (<em class="xref py py-obj">x</em>, <em class="xref py py-obj">y</em>) and by (<em class="xref py py-obj">y</em>, <em class="xref py py-obj">x</em>). This is the
behavior with default parameters.</p>
<p>Note that if you are computing the weighted <span class="math">\(\tau\)</span> on arrays of
ranks, rather than of scores (i.e., a larger value implies a lower
rank) you must negate the ranks, so that elements of higher rank are
associated with a larger value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x, y</strong> : array_like</p>
<blockquote>
<div><p>Arrays of scores, of the same shape. If arrays are not 1-D, they will
be flattened to 1-D.</p>
</div></blockquote>
<p><strong>rank: array_like of ints or bool, optional</strong></p>
<blockquote>
<div><p>A nonnegative rank assigned to each element. If it is None, the
decreasing lexicographical rank by (<em class="xref py py-obj">x</em>, <em class="xref py py-obj">y</em>) will be used: elements of
higher rank will be those with larger <em class="xref py py-obj">x</em>-values, using <em class="xref py py-obj">y</em>-values to
break ties (in particular, swapping <em class="xref py py-obj">x</em> and <em class="xref py py-obj">y</em> will give a different
result). If it is False, the element indices will be used
directly as ranks. The default is True, in which case this
function returns the average of the values obtained using the
decreasing lexicographical rank by (<em class="xref py py-obj">x</em>, <em class="xref py py-obj">y</em>) and by (<em class="xref py py-obj">y</em>, <em class="xref py py-obj">x</em>).</p>
</div></blockquote>
<p><strong>weigher</strong> : callable, optional</p>
<blockquote>
<div><p>The weigher function. Must map nonnegative integers (zero
representing the most important element) to a nonnegative weight.
The default, None, provides hyperbolic weighing, that is,
rank <span class="math">\(r\)</span> is mapped to weight <span class="math">\(1/(r+1)\)</span>.</p>
</div></blockquote>
<p><strong>additive</strong> : bool, optional</p>
<blockquote>
<div><p>If True, the weight of an exchange is computed by adding the
weights of the ranks of the exchanged elements; otherwise, the weights
are multiplied. The default is True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>correlation</strong> : float</p>
<blockquote>
<div><p>The weighted <span class="math">\(\tau\)</span> correlation index.</p>
</div></blockquote>
<p><strong>pvalue</strong> : float</p>
<blockquote class="last">
<div><p>Presently <code class="docutils literal"><span class="pre">np.nan</span></code>, as the null statistics is unknown (even in the
additive hyperbolic case).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="scipy.stats.kendalltau.html#scipy.stats.kendalltau" title="scipy.stats.kendalltau"><code class="xref py py-obj docutils literal"><span class="pre">kendalltau</span></code></a></dt>
<dd>Calculates Kendall’s tau.</dd>
<dt><a class="reference internal" href="scipy.stats.spearmanr.html#scipy.stats.spearmanr" title="scipy.stats.spearmanr"><code class="xref py py-obj docutils literal"><span class="pre">spearmanr</span></code></a></dt>
<dd>Calculates a Spearman rank-order correlation coefficient.</dd>
<dt><a class="reference internal" href="scipy.stats.theilslopes.html#scipy.stats.theilslopes" title="scipy.stats.theilslopes"><code class="xref py py-obj docutils literal"><span class="pre">theilslopes</span></code></a></dt>
<dd>Computes the Theil-Sen estimator for a set of points (x, y).</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>This function uses an <span class="math">\(O(n \log n)\)</span>, mergesort-based algorithm
<a class="reference internal" href="#r679" id="id2">[R679]</a> that is a weighted extension of Knight’s algorithm for Kendall’s
<span class="math">\(\tau\)</span> <a class="reference internal" href="#r680" id="id3">[R680]</a>. It can compute Shieh’s weighted <span class="math">\(\tau\)</span> <a class="reference internal" href="#r681" id="id4">[R681]</a>
between rankings without ties (i.e., permutations) by setting
<em class="xref py py-obj">additive</em> and <em class="xref py py-obj">rank</em> to False, as the definition given in <a class="reference internal" href="#r679" id="id5">[R679]</a> is a
generalization of Shieh’s.</p>
<p>NaNs are considered the smallest possible score.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.0.</span></p>
</div>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r679" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R679]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>, <a class="fn-backref" href="#id5">3</a>, <a class="fn-backref" href="#id6">4</a>)</em> Sebastiano Vigna, “A weighted correlation index for rankings with
ties”, Proceedings of the 24th international conference on World
Wide Web, pp. 1166-1176, ACM, 2015.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r680" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R680]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id7">2</a>)</em> W.R. Knight, “A Computer Method for Calculating Kendall’s Tau with
Ungrouped Data”, Journal of the American Statistical Association,
Vol. 61, No. 314, Part 1, pp. 436-439, 1966.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r681" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R681]</td><td><em>(<a class="fn-backref" href="#id4">1</a>, <a class="fn-backref" href="#id8">2</a>)</em> Grace S. Shieh. “A weighted Kendall’s tau statistic”, Statistics &amp;
Probability Letters, Vol. 39, No. 1, pp. 17-24, 1998.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">stats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.56694968153682723</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_value</span>
<span class="go">nan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">additive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.62205716951801038</span>
</pre></div>
</div>
<p>NaNs are considered the smallest possible score:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.56694968153682723</span>
</pre></div>
</div>
<p>This is exactly Kendall’s tau:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">weigher</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tau</span>
<span class="go">-0.47140452079103173</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">WeightedTauResult(correlation=-0.4157652301037516, pvalue=nan)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stats</span><span class="o">.</span><span class="n">weightedtau</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">rank</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">WeightedTauResult(correlation=-0.71813413296990281, pvalue=nan)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2016, The Scipy community.
      </li>
      <li>
      Last updated on Sep 21, 2017.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>