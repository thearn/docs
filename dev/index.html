<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>SciPy Developer Guide &mdash; SciPy v1.1.0.dev0+4e64658 Reference Guide</title>
    
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0.dev0+4e64658',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/scipy-mathjax/MathJax.js?config=scipy-mathjax"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" >
    <link rel="search" title="Search" href="../search.html" >
    <link rel="top" title="SciPy v1.1.0.dev0+4e64658 Reference Guide" href="../index.html" >
    <link rel="next" title="SciPy project governance" href="governance/governance.html" >
    <link rel="prev" title="Contributing to SciPy" href="../hacking.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../index.html">SciPy v1.1.0.dev0+4e64658 Reference Guide</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="governance/governance.html" title="SciPy project governance"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="../hacking.html" title="Contributing to SciPy"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/scipyshiny_small.png" alt="Logo">
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SciPy Developer Guide</a><ul>
<li><a class="reference internal" href="#decision-making-process">Decision making process</a><ul>
<li><a class="reference internal" href="#code">Code</a></li>
<li><a class="reference internal" href="#commit-rights">Commit rights</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deciding-on-new-features">Deciding on new features</a></li>
<li><a class="reference internal" href="#development-on-github">Development on GitHub</a><ul>
<li><a class="reference internal" href="#labels-and-milestones">Labels and Milestones</a></li>
<li><a class="reference internal" href="#dealing-with-pull-requests">Dealing with pull requests</a></li>
<li><a class="reference internal" href="#backporting">Backporting</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#licensing">Licensing</a></li>
<li><a class="reference internal" href="#version-numbering">Version numbering</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#distributing">Distributing</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#issues-with-dependency-handling">Issues with dependency handling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#supported-python-and-numpy-versions">Supported Python and Numpy versions</a></li>
<li><a class="reference internal" href="#building-binary-installers">Building binary installers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#making-a-scipy-release">Making a SciPy release</a><ul>
<li><a class="reference internal" href="#proposing-a-release-schedule">Proposing a release schedule</a></li>
<li><a class="reference internal" href="#creating-the-maintenance-branch">Creating the maintenance branch</a></li>
<li><a class="reference internal" href="#tagging-a-release">Tagging a release</a></li>
<li><a class="reference internal" href="#building-release-artifacts">Building release artifacts</a></li>
<li><a class="reference internal" href="#uploading-release-artifacts">Uploading release artifacts</a></li>
<li><a class="reference internal" href="#wrapping-up">Wrapping up</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-specific-instructions">Module-Specific Instructions</a><ul>
<li><a class="reference internal" href="#scipy-special"><code class="docutils literal"><span class="pre">scipy.special</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../hacking.html"
                        title="previous chapter">Contributing to SciPy</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="governance/governance.html"
                        title="next chapter">SciPy project governance</a></p>


        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="scipy-developer-guide">
<h1>SciPy Developer Guide<a class="headerlink" href="#scipy-developer-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="decision-making-process">
<h2>Decision making process<a class="headerlink" href="#decision-making-process" title="Permalink to this headline">¶</a></h2>
<p>SciPy has a formal governance model, documented in <a class="reference internal" href="governance/governance.html#governance"><span class="std std-ref">SciPy project governance</span></a>.  The
section below documents in an informal way what happens in practice for
decision making about code and commit rights. The formal governance model is
leading, the below is only provided for context.</p>
<div class="section" id="code">
<h3>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h3>
<p>Any significant decisions on adding (or not adding) new features, breaking
backwards compatibility or making other significant changes to the codebase
should be made on the scipy-dev mailing list after a discussion (preferably
with full consensus).</p>
<p>Any non-trivial change (where trivial means a typo, or a one-liner maintenance
commit) has to go in through a pull request (PR).  It has to be reviewed by
another developer.  In case review doesn’t happen quickly enough and it is
important that the PR is merged quickly, the submitter of the PR should send a
message to mailing list saying he/she intends to merge that PR without review
at time X for reason Y unless someone reviews it before then.</p>
<p>Changes and new additions should be tested. Untested code is broken code.</p>
</div>
<div class="section" id="commit-rights">
<h3>Commit rights<a class="headerlink" href="#commit-rights" title="Permalink to this headline">¶</a></h3>
<p>Who gets commit rights is decided by the SciPy Steering Council; changes in
commit rights will then be announced on the scipy-dev mailing list.</p>
</div>
</div>
<div class="section" id="deciding-on-new-features">
<h2>Deciding on new features<a class="headerlink" href="#deciding-on-new-features" title="Permalink to this headline">¶</a></h2>
<p>The general decision rule to accept a proposed new feature has so far
been conditional on:</p>
<ol class="arabic simple">
<li>The method is applicable in many fields and “generally agreed” to
be useful,</li>
<li>Fits the topic of the submodule, and does not require extensive
support frameworks to operate,</li>
<li>The implementation looks sound and unlikely to need much tweaking in
the future (e.g., limited expected maintenance burden), and</li>
<li>Someone wants to do it.</li>
</ol>
<p>Although it’s difficult to give hard rules on what “generally useful
and generally agreed to work” means, it may help to weigh the following
against each other:</p>
<ul class="simple">
<li>Is the method used/useful in different domains in practice?
How much domain-specific background knowledge is needed to use it
properly?</li>
<li>Consider the code already in the module.  Is what you are adding
an omission?  Does it solve a problem that you’d expect the module
be able to solve?  Does it supplement an existing feature in
a significant way?</li>
<li>Consider the equivalence class of similar methods / features usually
expected. Among them, what would in principle be the minimal set so
that there’s not a glaring omission in the offered features remaining?
How much stuff would that be? Does including a representative one of
them cover most use cases? Would it in principle sound reasonable to
include everything from the minimal set in the module?</li>
<li>Is what you are adding something that is well understood in the
literature? If not, how sure are you that it will turn out well?
Does the method perform well compared to other similar ones?</li>
<li>Note that the twice-a-year release cycle and backward-compatibility
policy makes correcting things later on more difficult.</li>
</ul>
<p>The scopes of the submodules also vary, so it’s probably best to consider
each as if it’s a separate project - “numerical evaluation of special
functions” is relatively well-defined, but “commonly needed optimization
algorithms” less so.</p>
</div>
<div class="section" id="development-on-github">
<h2>Development on GitHub<a class="headerlink" href="#development-on-github" title="Permalink to this headline">¶</a></h2>
<p>SciPy development largely takes place on GitHub; this section describes the
expected way of working for issues, pull requests and managing the main
<code class="docutils literal"><span class="pre">scipy</span></code> repository.</p>
<div class="section" id="labels-and-milestones">
<span id="id1"></span><h3>Labels and Milestones<a class="headerlink" href="#labels-and-milestones" title="Permalink to this headline">¶</a></h3>
<p>Each issue and pull request normally gets at least two labels: one for the
topic or component (<code class="docutils literal"><span class="pre">scipy.stats</span></code>, <code class="docutils literal"><span class="pre">Documentation</span></code>, etc.), and one for the
nature of the issue or pull request (<code class="docutils literal"><span class="pre">enhancement</span></code>, <code class="docutils literal"><span class="pre">maintenance</span></code>,
<code class="docutils literal"><span class="pre">defect</span></code>, etc.).  Other labels that may be added depending on the situation:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">easy-fix</span></code>: for issues suitable to be tackled by new contributors.</li>
<li><code class="docutils literal"><span class="pre">needs-work</span></code>: for pull requests that have review comments that haven’t been
addressed for a while.</li>
<li><code class="docutils literal"><span class="pre">needs-decision</span></code>: for issues or pull requests that need a decision.</li>
<li><code class="docutils literal"><span class="pre">needs-champion</span></code>: for pull requests that were not finished by the original
author, but are worth resurrecting.</li>
<li><code class="docutils literal"><span class="pre">backport-candidate</span></code>: bugfixes that should be considered for backporting by
the release manager.</li>
</ul>
<p>A milestone is created for each version number for which a release is planned.
Issues that need to be addressed and pull requests that need to be merged for a
particular release should be set to the corresponding milestone.  After a pull
request is merged, its milestone (and that of the issue it closes) should be
set to the next upcoming release - this makes it easy to get an overview of
changes and to add a complete list of those to the release notes.</p>
</div>
<div class="section" id="dealing-with-pull-requests">
<h3>Dealing with pull requests<a class="headerlink" href="#dealing-with-pull-requests" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When merging contributions, a committer is responsible for ensuring that
those meet the requirements outlined in <a class="reference external" href="https://github.com/scipy/scipy/blob/master/HACKING.rst.txt">Contributing to SciPy</a>. Also check
that new features and backwards compatibility breaks were discussed on the
scipy-dev mailing list.</li>
<li>New code goes in via a pull request (PR).</li>
<li>Merge new code with the green button.  In case of merge conflicts, ask the PR
submitter to rebase (this may require providing some git instructions).</li>
<li>Backports and trivial additions to finish a PR (really trivial, like a typo
or PEP8 fix) can be pushed directly.</li>
<li>For PRs that add new features or are in some way complex, wait at least a day
or two before merging it.  That way, others get a chance to comment before
the code goes in.</li>
<li>Squashing commits or cleaning up commit messages of a PR that you consider
too messy is OK. Make sure though to retain the original author name when
doing this.</li>
<li>Make sure that the labels and milestone on a merged PR are set correctly.</li>
<li>When you want to reject a PR: if it’s very obvious you can just close it and
explain why, if not obvious then it’s a good idea to first explain why you
think the PR is not suitable for inclusion in Scipy and then let a second
committer comment or close.</li>
</ul>
</div>
<div class="section" id="backporting">
<span id="id2"></span><h3>Backporting<a class="headerlink" href="#backporting" title="Permalink to this headline">¶</a></h3>
<p>All pull requests (whether they contain enhancements, bug fixes or something else),
should be made against master.  Only bug fixes are candidates for backporting
to a maintenance branch.  The backport strategy for SciPy is to (a) only backport
fixes that are important, and (b) to only backport when it’s reasonably sure
that a new bugfix release on the relevant maintenance branch will be made.
Typically, the developer who merges an important bugfix adds the
<code class="docutils literal"><span class="pre">backport-candidate</span></code> label and pings the release manager, who decides on
whether and when the backport is done.  After the backport is completed, the
<code class="docutils literal"><span class="pre">backport-candidate</span></code> label has to be removed again.</p>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<p><em>PR status page:</em> When new commits get added to a pull request, GitHub doesn’t send out any
notifications.  The <code class="docutils literal"><span class="pre">needs-work</span></code> label may not be justified anymore though.
<a class="reference external" href="https://pav.iki.fi/scipy-needs-work/">This page</a> gives an overview of PRs
that were updated, need review, need a decision, etc.</p>
<p><em>Cross-referencing:</em> Cross-referencing issues and pull requests on GitHub is
often useful.  GitHub allows doing that by using <code class="docutils literal"><span class="pre">gh-xxxx</span></code> or <code class="docutils literal"><span class="pre">#xxxx</span></code> with
<code class="docutils literal"><span class="pre">xxxx</span></code> the issue/PR number.  The <code class="docutils literal"><span class="pre">gh-xxxx</span></code> format is strongly preferred,
because it’s clear that that is a GitHub link.  Older issues contain <code class="docutils literal"><span class="pre">#xxxx</span></code>
which is about Trac (what we used pre-GitHub) tickets.</p>
<p><em>PR naming convention:</em> Pull requests, issues and commit messages usually start
with a three-letter abbreviation like <code class="docutils literal"><span class="pre">ENH:</span></code> or <code class="docutils literal"><span class="pre">BUG:</span></code>.  This is useful to
quickly see what the nature of the commit/PR/issue is.  For the full list of
abbreviations, see <a class="reference external" href="http://docs.scipy.org/doc/numpy-dev/dev/gitwash/development_workflow.html#writing-the-commit-message">writing the commit message</a>.</p>
</div>
</div>
<div class="section" id="licensing">
<h2>Licensing<a class="headerlink" href="#licensing" title="Permalink to this headline">¶</a></h2>
<p>Scipy is distributed under the modified (3-clause) BSD license.  All code,
documentation and other files added to Scipy by contributors is licensed under
this license, unless another license is explicitly specified in the source
code.  Contributors keep the copyright for code they wrote and submit for
inclusion to Scipy.</p>
<p>Other licenses that are compatible with the modified BSD license that Scipy
uses are 2-clause BSD, MIT and PSF.  Incompatible licenses are GPL, Apache and
custom licenses that require attribution/citation or prohibit use for
commercial purposes.</p>
<p>It regularly happens that PRs are submitted with content copied or derived from
unlicensed code.  Such contributions cannot be accepted for inclusion in Scipy.
What is needed in such cases is to contact the original author and ask him to
relicense his code under the modified BSD (or a compatible) license.  If the
original author agrees to this, add a comment saying so to the source files and
forward the relevant email to the scipy-dev mailing list.</p>
<p>What also regularly happens is that code is translated or derived from code in
R, Octave (both GPL-licensed) or a commercial application.  Such code also
cannot be included in Scipy.  Simply implementing functionality with the same
API as found in R/Octave/… is fine though, as long as the author doesn’t look
at the original incompatibly-licensed source code.</p>
</div>
<div class="section" id="version-numbering">
<h2>Version numbering<a class="headerlink" href="#version-numbering" title="Permalink to this headline">¶</a></h2>
<p>Scipy version numbering complies to <a class="reference external" href="https://www.python.org/dev/peps/pep-0440">PEP 440</a>.  Released final versions, which
are the only versions appearing on <a class="reference external" href="http://pypi.python.org/">PyPI</a>, are numbered <code class="docutils literal"><span class="pre">MAJOR.MINOR.MICRO</span></code>
where:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">MAJOR</span></code> is an integer indicating the major version.  It changes very
rarely; a change in <code class="docutils literal"><span class="pre">MAJOR</span></code> indicates large (possibly backwards-incompatible)
changes.</li>
<li><code class="docutils literal"><span class="pre">MINOR</span></code> is an integer indicating the minor version.  Minor versions are
typically released twice a year and can contain new features, deprecations and
bug-fixes.</li>
<li><code class="docutils literal"><span class="pre">MICRO</span></code> is an integer indicating a bug-fix version.  Bug-fix versions are
released when needed, typically one or two per minor version.  They cannot
contain new features or deprecations.</li>
</ul>
<p>Released alpha, beta and rc (release candidate) versions are numbered
like final versions but with postfixes <code class="docutils literal"><span class="pre">a#</span></code>, <code class="docutils literal"><span class="pre">b#</span></code> and <code class="docutils literal"><span class="pre">rc#</span></code> respectively,
with <code class="docutils literal"><span class="pre">#</span></code> an integer.  Development versions are postfixed with <code class="docutils literal"><span class="pre">.dev0+&lt;git-commit-hash&gt;</span></code>.</p>
<p>Examples of valid Scipy version strings are:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mf">0.16</span><span class="o">.</span><span class="mi">0</span>
<span class="mf">0.15</span><span class="o">.</span><span class="mi">1</span>
<span class="mf">0.14</span><span class="o">.</span><span class="mi">0</span><span class="n">a1</span>
<span class="mf">0.14</span><span class="o">.</span><span class="mi">0</span><span class="n">b2</span>
<span class="mf">0.14</span><span class="o">.</span><span class="mi">0</span><span class="n">rc1</span>
<span class="mf">0.17</span><span class="o">.</span><span class="mf">0.</span><span class="n">dev0</span><span class="o">+</span><span class="n">ac53f09</span>
</pre></div>
</div>
<p>An installed Scipy version contains these version identifiers:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">scipy</span><span class="o">.</span><span class="n">__version__</span>            <span class="c1"># complete version string, including git commit hash for dev versions</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">short_version</span>  <span class="c1"># string, only major.minor.micro</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version</span>        <span class="c1"># string, same as scipy.__version__</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">full_version</span>   <span class="c1"># string, same as scipy.__version__</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">release</span>        <span class="c1"># bool, development or (alpha/beta/rc/final) released version</span>
<span class="n">scipy</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">git_revision</span>   <span class="c1"># string, git commit hash from which scipy was built</span>
</pre></div>
</div>
</div>
<div class="section" id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<p>There are various reasons for wanting to remove existing functionality: it’s
buggy, the API isn’t understandable, it’s superceded by functionality with
better performance, it needs to be moved to another Scipy submodule, etc.</p>
<p>In general it’s not a good idea to remove something without warning users about
that removal first.  Therefore this is what should be done before removing
something from the public API:</p>
<ol class="arabic simple">
<li>Propose to deprecate the functionality on the scipy-dev mailing list and get
agreement that that’s OK.</li>
<li>Add a <code class="docutils literal"><span class="pre">DeprecationWarning</span></code> for it, which states that the functionality was
deprecated, and in which release.</li>
<li>Mention the deprecation in the release notes for that release.</li>
<li>Wait till at least 6 months after the release date of the release that
introduced the <code class="docutils literal"><span class="pre">DeprecationWarning</span></code> before removing the functionality.</li>
<li>Mention the removal of the functionality in the release notes.</li>
</ol>
<p>The 6 months waiting period in practice usually means waiting two releases.
When introducing the warning, also ensure that those warnings are filtered out
when running the test suite so they don’t pollute the output.</p>
<p>It’s possible that there is reason to want to ignore this deprecation policy
for a particular deprecation; this can always be discussed on the scipy-dev
mailing list.</p>
</div>
<div class="section" id="distributing">
<h2>Distributing<a class="headerlink" href="#distributing" title="Permalink to this headline">¶</a></h2>
<p>Distributing Python packages is nontrivial - especially for a package with
complex build requirements like Scipy - and subject to change.  For an up-to-date
overview of recommended tools and techniques, see the <a class="reference external" href="https://packaging.python.org">Python Packaging User
Guide</a>.  This document discusses some of the main issues and considerations for
Scipy.</p>
<div class="section" id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h3>
<p>Dependencies are things that a user has to install in order to use (or
build/test) a package.  They usually cause trouble, especially if they’re not
optional.  Scipy tries to keep its dependencies to a minimum; currently they
are:</p>
<p><em>Unconditional run-time dependencies:</em></p>
<ul class="simple">
<li><a class="reference external" href="http://numpy.org">Numpy</a></li>
</ul>
<p><em>Conditional run-time dependencies:</em></p>
<ul class="simple">
<li><a class="reference external" href="http://nose.readthedocs.org">nose</a> (to run the test suite)</li>
<li><a class="reference external" href="http://asv.readthedocs.org">asv</a> (to run the benchmarks)</li>
<li><a class="reference external" href="http://matplotlib.org">matplotlib</a> (for some functions that can produce plots)</li>
<li><a class="reference external" href="http://pillow.readthedocs.org">Pillow</a> (for image loading/saving)</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/scikit-umfpack">scikits.umfpack</a> (optionally used in <code class="docutils literal"><span class="pre">sparse.linalg</span></code>)</li>
<li><a class="reference external" href="http://mpmath.org">mpmath</a> (for more extended tests in <code class="docutils literal"><span class="pre">special</span></code>)</li>
</ul>
<p><em>Unconditional build-time dependencies:</em></p>
<ul class="simple">
<li><a class="reference external" href="http://numpy.org">Numpy</a></li>
<li>A BLAS and LAPACK implementation (reference BLAS/LAPACK, ATLAS, OpenBLAS,
MKL, Accelerate are all known to work)</li>
<li>(for development versions) <a class="reference external" href="http://cython.org">Cython</a></li>
</ul>
<p><em>Conditional build-time dependencies:</em></p>
<ul class="simple">
<li><a class="reference external" href="https://bitbucket.org/pypa/setuptools">setuptools</a></li>
<li><a class="reference external" href="wheel.readthedocs.org">wheel</a> (<code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">bdist_wheel</span></code>)</li>
<li><a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> (docs)</li>
<li><a class="reference external" href="http://matplotlib.org">matplotlib</a> (docs)</li>
<li>LaTeX (pdf docs)</li>
<li><a class="reference external" href="http://pillow.readthedocs.org">Pillow</a> (docs)</li>
</ul>
<p>Furthermore of course one needs C, C++ and Fortran compilers to build Scipy,
but those we don’t consider to be dependencies and are therefore not discussed
here.  For details, see <a class="reference external" href="http://scipy.org/scipylib/building/index.html">http://scipy.org/scipylib/building/index.html</a>.</p>
<p>When a package provides useful functionality and it’s proposed as a new
dependency, consider also if it makes sense to vendor (i.e. ship a copy of it with
scipy) the package instead.  For example, <a class="reference external" href="https://pypi.python.org/pypi/six">six</a> and <a class="reference external" href="https://github.com/micheles/decorator">decorator</a> are vendored in
<code class="docutils literal"><span class="pre">scipy._lib</span></code>.</p>
<p>The only dependency that is reported to <a class="reference external" href="http://pip-installer.org">pip</a>  is <a class="reference external" href="http://numpy.org">Numpy</a>, see
<code class="docutils literal"><span class="pre">install_requires</span></code> in Scipy’s main <code class="docutils literal"><span class="pre">setup.py</span></code>.  The other dependencies
aren’t needed for Scipy to function correctly, and the one unconditional build
dependency that <a class="reference external" href="http://pip-installer.org">pip</a> knows how to install (<a class="reference external" href="http://cython.org">Cython</a>) we prefer to treat like a
compiler rather than a Python package that <a class="reference external" href="http://pip-installer.org">pip</a> is allowed to upgrade.</p>
<div class="section" id="issues-with-dependency-handling">
<h4>Issues with dependency handling<a class="headerlink" href="#issues-with-dependency-handling" title="Permalink to this headline">¶</a></h4>
<p>There are some serious issues with how Python packaging tools handle
dependencies reported by projects.  Because Scipy gets regular bug reports
about this, we go in a bit of detail here.</p>
<p>Scipy only reports its dependency on Numpy via <code class="docutils literal"><span class="pre">install_requires</span></code> if Numpy
isn’t installed at all on a system.  This will only change when there are
either 32-bit and 64-bit Windows wheels for Numpy on PyPI or when
<code class="docutils literal"><span class="pre">pip</span> <span class="pre">upgrade</span></code> becomes available (with sane behavior, unlike <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span>
<span class="pre">-U</span></code>, see <a class="reference external" href="https://github.com/pypa/pip/pull/3194">this PR</a>).  For more details, see
<a class="reference external" href="http://article.gmane.org/gmane.comp.python.distutils.devel/24218">this summary</a>.</p>
<p>The situation with <code class="docutils literal"><span class="pre">setup_requires</span></code> is even worse; <a class="reference external" href="http://pip-installer.org">pip</a> doesn’t handle that
keyword at all, while <code class="docutils literal"><span class="pre">setuptools</span></code> has issues (here’s a <a class="reference external" href="https://bitbucket.org/pypa/setuptools/issues/391">current one</a>) and invokes
<code class="docutils literal"><span class="pre">easy_install</span></code> which comes with its own set of problems (note that Scipy doesn’t
support <code class="docutils literal"><span class="pre">easy_install</span></code> at all anymore; issues specific to it will be closed
as “wontfix”).</p>
</div>
</div>
<div class="section" id="supported-python-and-numpy-versions">
<span id="supported-py-numpy-versions"></span><h3>Supported Python and Numpy versions<a class="headerlink" href="#supported-python-and-numpy-versions" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://python.org">Python</a> versions that Scipy supports are listed in the list of PyPI
classifiers in <code class="docutils literal"><span class="pre">setup.py</span></code>, and mentioned in the release notes for each
release.  All newly released Python versions will be supported as soon as
possible.  The general policy on dropping support for a Python version is that
(a) usage of that version has to be quite low (say &lt;5% of users) and (b) the
version isn’t included in an active long-term support release of one of the
main Linux distributions anymore.  Scipy typically follows Numpy, which has a
similar policy.  The final decision on dropping support is always taken on the
scipy-dev mailing list.</p>
<p>The lowest supported <a class="reference external" href="http://numpy.org">Numpy</a> version for a Scipy version is mentioned in the
release notes and is encoded in <code class="docutils literal"><span class="pre">scipy/__init__.py</span></code> and the
<code class="docutils literal"><span class="pre">install_requires</span></code> field of <code class="docutils literal"><span class="pre">setup.py</span></code>.  Typically the latest Scipy release
supports 3 or 4 minor versions of Numpy.  That may become more if the frequency
of Numpy releases increases (it’s about 1x/year at the time of writing).
Support for a particular Numpy version is typically dropped if (a) that Numpy
version is several years old, and (b) the maintenance cost of keeping support
is starting to outweigh the benefits.  The final decision on dropping support
is always taken on the scipy-dev mailing list.</p>
<p>Supported versions of optional dependencies and compilers is less clearly
documented, and also isn’t tested well or at all by Scipy’s Continuous
Integration setup.  Issues regarding this are dealt with as they come up in the
issue tracker or mailing list.</p>
</div>
<div class="section" id="building-binary-installers">
<h3>Building binary installers<a class="headerlink" href="#building-binary-installers" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is only about building Scipy binary installers to <em>distribute</em>.
For info on building Scipy on the same machine as where it will be used, see
<a class="reference external" href="http://scipy.org/scipylib/building/index.html">this scipy.org page</a>.</p>
</div>
<p>There are a number of things to take into consideration when building binaries
and distributing them on PyPI or elsewhere.</p>
<p><strong>General</strong></p>
<ul class="simple">
<li>A binary is specific for a single Python version (because different Python
versions aren’t ABI-compatible, at least up to Python 3.4).</li>
<li>Build against the lowest Numpy version that you need to support, then it will
work for all Numpy versions with the same major version number (Numpy does
maintain backwards ABI compatibility).</li>
</ul>
<p><strong>Windows</strong></p>
<ul class="simple">
<li>The currently most easily available toolchain for building
Python.org compatible binaries for Scipy is installing MSVC (see
<a class="reference external" href="https://wiki.python.org/moin/WindowsCompilers">https://wiki.python.org/moin/WindowsCompilers</a>) and mingw64-gfortran.
Support for this configuration requires numpy.distutils from
Numpy &gt;= 1.14.dev and a gcc/gfortran-compiled static <code class="docutils literal"><span class="pre">openblas.a</span></code>.
This configuration is currently used in the Appveyor configuration for
<a class="reference external" href="https://github.com/MacPython/scipy-wheels">https://github.com/MacPython/scipy-wheels</a></li>
<li>For 64-bit Windows installers built with a free toolchain, use the method
documented at <a class="reference external" href="https://github.com/numpy/numpy/wiki/Mingw-static-toolchain">https://github.com/numpy/numpy/wiki/Mingw-static-toolchain</a>.
That method will likely be used for Scipy itself once it’s clear that the
maintenance of that toolchain is sustainable long-term.  See the <a class="reference external" href="https://mingwpy.github.io">MingwPy</a>
project and <a class="reference external" href="http://article.gmane.org/gmane.comp.python.numeric.general/61727">this thread</a> for
details.</li>
<li>The other way to produce 64-bit Windows installers is with <code class="docutils literal"><span class="pre">icc</span></code>, <code class="docutils literal"><span class="pre">ifort</span></code>
plus <code class="docutils literal"><span class="pre">MKL</span></code> (or <code class="docutils literal"><span class="pre">MSVC</span></code> instead of <code class="docutils literal"><span class="pre">icc</span></code>).  For Intel toolchain
instructions see
<a class="reference external" href="https://software.intel.com/en-us/articles/numpyscipy-with-intel-mkl">this article</a>
and for (partial) MSVC instructions see
<a class="reference external" href="https://github.com/numpy/numpy/wiki/Building-with-MSVC">this wiki page</a>.</li>
<li>Older Scipy releases contained a .exe “superpack” installer.  Those contain
3 complete builds (no SSE, SSE2, SSE3), and were built with
<a class="reference external" href="https://github.com/numpy/numpy-vendor">https://github.com/numpy/numpy-vendor</a>.  That build setup is known to not work
well anymore and is no longer supported.  It used g77 instead of gfortran,
due to complex DLL distribution issues (see <a class="reference external" href="https://github.com/scipy/scipy/issues/2829">gh-2829</a>).  Because the toolchain is no
longer supported, g77 support isn’t needed anymore and Scipy can now include
Fortran 90/95 code.</li>
</ul>
<p><strong>OS X</strong></p>
<ul class="simple">
<li>To produce OS X wheels that work with various Python versions (from
python.org, Homebrew, MacPython), use the build method provided by
<a class="reference external" href="https://github.com/MacPython/scipy-wheels">https://github.com/MacPython/scipy-wheels</a>.</li>
<li>DMG installers for the Python from python.org on OS X can still be produced
by <code class="docutils literal"><span class="pre">tools/scipy-macosx-installer/</span></code>.  Scipy doesn’t distribute those
installers anymore though, now that there are binary wheels on PyPi.</li>
</ul>
<p><strong>Linux</strong></p>
<ul class="simple">
<li>PyPi-compatible Linux wheels can be produced via the <a class="reference external" href="https://github.com/pypa/manylinux/">manylinux</a> project.
The corresponding build setup for TravisCI for Scipy is set up in
<a class="reference external" href="https://github.com/MacPython/scipy-wheels">https://github.com/MacPython/scipy-wheels</a>.</li>
</ul>
<p>Other Linux build-setups result to PyPi incompatible wheels, which
would need to be distributed via custom channels, e.g. in a
<a class="reference external" href="https://pypi.python.org/pypi/Wheelhouse">Wheelhouse</a>, see at the <a class="reference external" href="wheel.readthedocs.org">wheel</a> and <a class="reference external" href="https://pypi.python.org/pypi/Wheelhouse">Wheelhouse</a> docs.</p>
</div>
</div>
<div class="section" id="making-a-scipy-release">
<span id="making-a-release"></span><h2>Making a SciPy release<a class="headerlink" href="#making-a-scipy-release" title="Permalink to this headline">¶</a></h2>
<p>At the highest level, this is what the release manager does to release a new
Scipy version:</p>
<ol class="arabic simple">
<li>Propose a release schedule on the scipy-dev mailing list.</li>
<li>Create the maintenance branch for the release.</li>
<li>Tag the release.</li>
<li>Build all release artifacts (sources, installers, docs).</li>
<li>Upload the release artifacts.</li>
<li>Announce the release.</li>
<li>Port relevant changes to release notes and build scripts to master.</li>
</ol>
<p>In this guide we attempt to describe in detail how to perform each of the above
steps.  In addition to those steps, which have to be performed by the release
manager, here are descriptions of release-related activities and conventions of
interest:</p>
<ul class="simple">
<li><a class="reference internal" href="#backporting"><span class="std std-ref">Backporting</span></a></li>
<li><a class="reference internal" href="#labels-and-milestones"><span class="std std-ref">Labels and Milestones</span></a></li>
<li><a class="reference internal" href="versioning.html"><span class="doc">Version numbering</span></a></li>
<li><a class="reference internal" href="#supported-py-numpy-versions"><span class="std std-ref">Supported Python and Numpy versions</span></a></li>
<li><a class="reference internal" href="deprecations.html"><span class="doc">Deprecations</span></a></li>
</ul>
<div class="section" id="proposing-a-release-schedule">
<h3>Proposing a release schedule<a class="headerlink" href="#proposing-a-release-schedule" title="Permalink to this headline">¶</a></h3>
<p>A typical release cycle looks like:</p>
<ul class="simple">
<li>Create the maintenance branch</li>
<li>Release a beta version</li>
<li>Release a “release candidate” (RC)</li>
<li>If needed, release one or more new RCs</li>
<li>Release the final version once there are no issues with the last release
candidate</li>
</ul>
<p>There’s usually at least one week between each of the above steps.  Experience
shows that a cycle takes between 4 and 8 weeks for a new minor version.
Bug-fix versions don’t need a beta or RC, and can be done much quicker.</p>
<p>Ideally the final release is identical to the last RC, however there may be
minor difference - it’s up to the release manager to judge the risk of that.
Typically, if compiled code or complex pure Python code changes then a new RC
is needed, while a simple bug-fix that’s backported from master doesn’t require
a new RC.</p>
<p>To propose a schedule, send a list with estimated dates for branching and
beta/rc/final releases to scipy-dev. In the same email, ask everyone to check
if there are important issues/PRs that need to be included and aren’t tagged
with the Milestone for the release or the “backport-candidate” label.</p>
</div>
<div class="section" id="creating-the-maintenance-branch">
<h3>Creating the maintenance branch<a class="headerlink" href="#creating-the-maintenance-branch" title="Permalink to this headline">¶</a></h3>
<p>Before branching, ensure that the release notes are updated as far as possible.
Include the output of <code class="docutils literal"><span class="pre">tools/gh_lists.py</span></code> and <code class="docutils literal"><span class="pre">tools/authors.py</span></code> in the
release notes.</p>
<p>Maintenance branches are named <code class="docutils literal"><span class="pre">maintenance/&lt;major&gt;.&lt;minor&gt;.x</span></code> (e.g. 0.19.x).
To create one, simply push a branch with the correct name to the scipy repo.
Immediately after, push a commit where you increment the version number on the
master branch and add release notes for that new version.  Send an email to
scipy-dev to let people know that you’ve done this.</p>
</div>
<div class="section" id="tagging-a-release">
<h3>Tagging a release<a class="headerlink" href="#tagging-a-release" title="Permalink to this headline">¶</a></h3>
<p>First ensure that you have set up GPG correctly.  See
<a class="reference external" href="https://github.com/scipy/scipy/issues/4919">https://github.com/scipy/scipy/issues/4919</a> for a discussion of signing release
tags, and <a class="reference external" href="http://keyring.debian.org/creating-key.html">http://keyring.debian.org/creating-key.html</a> for instructions on
creating a GPG key if you do not have one.</p>
<p>To make your key more readily identifiable as you, consider sending your key
to public keyservers, with a command such as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gpg</span> <span class="o">--</span><span class="n">send</span><span class="o">-</span><span class="n">keys</span> <span class="o">&lt;</span><span class="n">yourkeyid</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Check that all relevant commits are in the branch.  In particular, check issues
and PRs under the Milestone for the release
(<a class="reference external" href="https://github.com/scipy/scipy/milestones">https://github.com/scipy/scipy/milestones</a>), PRs labeled “backport-candidate”,
and that the release notes are up-to-date and included in the html docs.</p>
<p>Then edit <code class="docutils literal"><span class="pre">setup.py</span></code> to get the correct version number (set
<code class="docutils literal"><span class="pre">ISRELEASED</span> <span class="pre">=</span> <span class="pre">True</span></code>) and commit it with a message like <code class="docutils literal"><span class="pre">REL:</span> <span class="pre">set</span> <span class="pre">version</span> <span class="pre">to</span>
<span class="pre">&lt;version-number&gt;</span></code>.  Don’t push this commit to the Scipy repo yet.</p>
<p>Finally tag the release locally with <code class="docutils literal"><span class="pre">git</span> <span class="pre">tag</span> <span class="pre">-s</span> <span class="pre">&lt;v0.x.y&gt;</span></code> (the <code class="docutils literal"><span class="pre">-s</span></code> ensures
the tag is signed).  Continue with building release artifacts (next section).
Only push the release commit and tag to the scipy repo once you have built the
docs and Windows installers successfully.  After that push, also push a second
commit which increment the version number and sets <code class="docutils literal"><span class="pre">ISRELEASED</span></code> to False
again.</p>
</div>
<div class="section" id="building-release-artifacts">
<h3>Building release artifacts<a class="headerlink" href="#building-release-artifacts" title="Permalink to this headline">¶</a></h3>
<p>Here is a complete list of artifacts created for a release:</p>
<ul class="simple">
<li>source archives (<code class="docutils literal"><span class="pre">.tar.gz</span></code>, <code class="docutils literal"><span class="pre">.zip</span></code> and <code class="docutils literal"><span class="pre">.tar.xz</span></code> for GitHub Releases,
only <code class="docutils literal"><span class="pre">.tar.gz</span></code> is uploaded to PyPI)</li>
<li>Binary wheels for Windows, Linx and OS X</li>
<li>Documentation (<code class="docutils literal"><span class="pre">html</span></code>, <code class="docutils literal"><span class="pre">pdf</span></code>)</li>
<li>A <code class="docutils literal"><span class="pre">README</span></code> file</li>
<li>A <code class="docutils literal"><span class="pre">Changelog</span></code> file</li>
</ul>
<p>All of these except the wheels are built by running <code class="docutils literal"><span class="pre">paver</span> <span class="pre">release</span></code> in
the repo root.  Do this after you’ve created the signed tag.  If this completes
without issues, push the release tag to the scipy repo.  This is needed because
the <code class="docutils literal"><span class="pre">scipy-wheels</span></code> build scripts automatically build the last tag.</p>
<p>To build wheels, push a commit to the master branch of
<a class="reference external" href="https://github.com/MacPython/scipy-wheels">https://github.com/MacPython/scipy-wheels</a> .  This triggers builds for all needed
Python versions on TravisCI.  Update and check the <code class="docutils literal"><span class="pre">.travis.yml</span></code> and <code class="docutils literal"><span class="pre">appveyor.yml</span></code>
config files what tag to build, and what Python and Numpy are used for the builds
(it needs to be the lowest supported Numpy version for each Python version).
See the README file in the scipy-wheels repo for more details.</p>
<p>The TravisCI and Appveyor builds run the tests from the built wheels and if they pass,
upload the wheels to a container pointed to at <a class="reference external" href="https://github.com/MacPython/scipy-wheels">https://github.com/MacPython/scipy-wheels</a></p>
<p>From there you can download them for uploading to PyPI.  This can be
done in an automated fashion with <code class="docutils literal"><span class="pre">terryfy</span></code> (note the -n switch
which makes it only download the wheels and skip the upload to PyPI
step - we want to be able to check the wheels and put their checksums
into README first):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python wheel-uploader -n -v -c -w ~/PATH_TO_STORE_WHEELS -t manylinux1 scipy 0.19.0
$ python wheel-uploader -n -v -c -w ~/PATH_TO_STORE_WHEELS -t macosx scipy 0.19.0
</pre></div>
</div>
</div>
<div class="section" id="uploading-release-artifacts">
<h3>Uploading release artifacts<a class="headerlink" href="#uploading-release-artifacts" title="Permalink to this headline">¶</a></h3>
<p>For a release there are currently five places on the web to upload things to:</p>
<ul class="simple">
<li>PyPI (tarballs, wheels)</li>
<li>Github releases (tarballs, release notes, Changelog)</li>
<li>scipy.org (an announcement of the release)</li>
<li>docs.scipy.org (html/pdf docs)</li>
</ul>
<p><strong>PyPI:</strong></p>
<p><code class="docutils literal"><span class="pre">twine</span> <span class="pre">upload</span> <span class="pre">-s</span> <span class="pre">&lt;tarballs</span> <span class="pre">or</span> <span class="pre">wheels</span> <span class="pre">to</span> <span class="pre">upload&gt;</span></code></p>
<p><strong>Github Releases:</strong></p>
<p>Use GUI on <a class="reference external" href="https://github.com/scipy/scipy/releases">https://github.com/scipy/scipy/releases</a> to create release and
upload all release artifacts.</p>
<p><strong>scipy.org:</strong></p>
<p>Sources for the site are in <a class="reference external" href="https://github.com/scipy/scipy.org">https://github.com/scipy/scipy.org</a>.
Update the News section in <code class="docutils literal"><span class="pre">www/index.rst</span></code> and then do
<code class="docutils literal"><span class="pre">make</span> <span class="pre">upload</span> <span class="pre">USERNAME=yourusername</span></code>.</p>
<p><strong>docs.scipy.org:</strong></p>
<p>First build the scipy docs, by running <code class="docutils literal"><span class="pre">make</span> <span class="pre">dist</span></code> in <code class="docutils literal"><span class="pre">scipy/doc/</span></code>.  Verify
that they look OK, then upload them to the doc server with
<code class="docutils literal"><span class="pre">make</span> <span class="pre">upload</span> <span class="pre">USERNAME=rgommers</span> <span class="pre">RELEASE=0.19.0</span></code>.  Note that SSH access to the
doc server is needed; ask &#64;pv (server admin) or &#64;rgommers (can upload) if you
don’t have that.</p>
<p>The sources for the website itself are maintained in
<a class="reference external" href="https://github.com/scipy/docs.scipy.org/">https://github.com/scipy/docs.scipy.org/</a>.  Add the new Scipy version in the
table of releases in <code class="docutils literal"><span class="pre">index.rst</span></code>.  Push that commit, then do <code class="docutils literal"><span class="pre">make</span> <span class="pre">upload</span>
<span class="pre">USERNAME=yourusername</span></code>.</p>
</div>
<div class="section" id="wrapping-up">
<h3>Wrapping up<a class="headerlink" href="#wrapping-up" title="Permalink to this headline">¶</a></h3>
<p>Send an email announcing the release to the following mailing lists:</p>
<ul class="simple">
<li>scipy-dev</li>
<li>scipy-user</li>
<li>numpy-discussion</li>
<li>python-announce (not for beta/rc releases)</li>
</ul>
<p>For beta and rc versions, ask people in the email to test (run the scipy tests
and test against their own code) and report issues on Github or scipy-dev.</p>
<p>After the final release is done, port relevant changes to release notes, build
scripts, author name mapping in <code class="docutils literal"><span class="pre">tools/authors.py</span></code> and any other changes that
were only made on the maintenance branch to master.</p>
</div>
</div>
<div class="section" id="module-specific-instructions">
<h2>Module-Specific Instructions<a class="headerlink" href="#module-specific-instructions" title="Permalink to this headline">¶</a></h2>
<p>Some SciPy modules have specific development workflows that it is
useful to be aware of while contributing.</p>
<div class="section" id="scipy-special">
<h3><code class="docutils literal"><span class="pre">scipy.special</span></code><a class="headerlink" href="#scipy-special" title="Permalink to this headline">¶</a></h3>
<p>Many of the functions in <code class="docutils literal"><span class="pre">special</span></code> are vectorized versions of scalar
functions. The scalar functions are written by hand and the necessary
loops for vectorization are generated automatically. This section
discusses the steps necessary to add a new vectorized special
function.</p>
<p>The first step in adding a new vectorized function is writing the
corresponding scalar function. This can be done in Cython, C, C++, or
Fortran. If starting from scratch then Cython should be preferred
because the code is easier to maintain for developers only familiar
with Python. If the primary code is in Fortran then it is necessary to
write a C wrapper around the code; for examples of such wrappers see
<code class="docutils literal"><span class="pre">specfun_wrappers.c</span></code>.</p>
<p>After implementing the scalar function, register the new function by
adding a line to the <code class="docutils literal"><span class="pre">FUNC</span></code> string in <code class="docutils literal"><span class="pre">generate_ufuncs.py</span></code>. The
docstring for that file explains the format. Also add documentation
for the new function by adding an entry to <code class="docutils literal"><span class="pre">add_newdocs.py</span></code>; look in
the file for examples.</p>
</div>
</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2016, The Scipy community.
      </li>
      <li>
      Last updated on Sep 21, 2017.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.3.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>